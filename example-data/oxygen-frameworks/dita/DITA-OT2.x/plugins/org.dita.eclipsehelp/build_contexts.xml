<?xml version="1.0" encoding="UTF-8"?>
<!--OXYGEN PATCH FOR EXM-18224-->
<project basedir="." name="Build Eclipse Contexts">
    <target name="generate.contexts">
        <echo>Generate contexts.xml file from topic output files.</echo>
        <xslt in="${dita.output.dir}/${dita.map.filename.root}.xml" out="${dita.output.dir}/contexts.xml" style="${dita.plugin.org.dita.eclipsehelp.dir}/xsl/contexts.xsl">
            <xmlcatalog>
                <catalogpath>
                    <pathelement location="${dita.dir}/catalog-dita.xml"/>
                    <pathelement location="${dita.plugin.com.oxygenxml.webhelp.classic.dir}/dtd/xhtmlcatalog.xml"/>
                </catalogpath>
            </xmlcatalog>
        </xslt>
    </target>
    
    <!--<taskdef resource="net/sf/antcontrib/antcontrib.properties"/>-->
    
    <!--<target name="build.eclipsehelp.jar" depends="generate.contexts">
        <propertyregex
            property="profile.name"
            override="true"
            input="${dita.input.valfile}"
            regexp="(.+)\\(.+)\.ditaval"
            select="\2"
        />
        
        <condition property="helpset.name" value="${dita.map.filename.root}_${profile.name}">
            <and>
                <isset property="profile.name"/>
                <not>
                    <isset property="helpset.name"/>
                </not>
            </and>
        </condition>
        <condition property="helpset.name" value="${dita.map.filename.root}">
            <and>
                <not>
                    <isset property="profile.name"/>
                </not>
                <not>
                    <isset property="helpset.name"/>
                </not>
            </and>
        </condition>
        
        <property name="help.jar"  value="${helpset.name}.jar" />
        <echo>Building Eclipse help jar file: ${help.jar}</echo>
        <jar destfile="${dita.map.output.dir}/${help.jar}" basedir="${dita.map.output.dir}">
            <include name="**/*"/>
            <exclude name="${help.jar}"/>
            <exclude name="plugin.*"/>
        </jar>
    </target>-->
</project>