<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Mulberry Technologies, Inc.: NISO JATS 1.0 Preview Stylesheets: Technical
         Documentation
      </title>
      <link rel="stylesheet" type="text/css" href="jats-preview.css">
   </head>
   <body>
      <div id="article1-front" class="front">
         <div class="metadata two-column table">
            <div class="row">
               <div class="cell">
                  <h4 class="generated">Journal Information</h4>
                  <div class="metadata-group">
                     <p class="metadata-entry"><span class="generated">Journal ID: </span>N/A
                     </p>
                     <p class="metadata-entry"><span class="generated">ISSN: </span>N/A
                     </p>
                  </div>
               </div>
               <div class="cell">
                  <h4 class="generated">Article Information</h4>
                  <div class="metadata-group">
                     <p class="metadata-entry"><span class="generated">Publication date: </span>2012
                     </p>
                  </div>
               </div>
            </div>
         </div>
         <hr class="part-rule">
         <div class="metadata centered">
            <h1 class="document-title">NISO JATS 1.0 Preview Stylesheets: <br class="br">Technical
               Documentation
            </h1>
         </div>
         <div class="metadata two-column table">
            <div class="row">
               <div class="cell" style="text-align: right">
                  <div class="metadata-group">
                     <p class="metadata-entry"><a id="d2e18">
                           <!-- named anchor --></a>Mulberry Technologies, Inc.
                     </p>
                  </div>
               </div>
               <div class="cell">
                  <div class="metadata-group"></div>
               </div>
            </div>
         </div>
         <hr class="part-rule">
      </div>
      <div id="article1-body" class="body">
         <div class="section"><a id="d2e24">
               <!-- named anchor --></a><h2 class="main-title">Introduction</h2>
            <p id="d2e27">This document provides technical information regarding the HTML and PDF Preview stylesheets
               for the NISO Journal Article Tag Suite Publishing 1.0 tag set. (See <a target="xrefwindow" href="http://dtd.nlm.nih.gov/publishing/" id="d2e29">http://dtd.nlm.nih.gov/publishing/</a>.) It is intended for technical users, that
               is, personnel responsible for installing, configuring, and maintaining or extending
               these
               stylesheets. For information intended for general users regarding the scope and application
               of
               these stylesheets, see the <i>Users' Guide</i> in this distribution. For
               instructions on how to run these stylesheets on Journal Publishing content using a
               basic
               configuration, see the <i>Quick Start Guide</i>.
            </p>
            <div class="section"><a id="d2e38">
                  <!-- named anchor --></a><h3 class="section-title">Copyright and disclaimer information for JATS preview software</h3>
               <p id="d2e41">The XSL stylesheets and other code (CSS, XProc, and Schematron) provided at the NCBITools/JATSPreviewStylesheets
                  github repository (<a target="xrefwindow" href="https://github.com/NCBITools/JATSPreviewStylesheets" id="d2e43">https://github.com/NCBITools/JATSPreviewStylesheets</a>) is work is in the public domain and may be reproduced, published or 
                  otherwise used without the permission of the National Library of Medicine (NLM).
               </p>
               <p id="d2e46">We request only that the NLM is cited as the source of the work.</p>
               <p id="d2e48">Although all reasonable efforts have been taken to ensure the accuracy and 
                  reliability of the software and data, the NLM and the U.S. Government  do 
                  not and cannot warrant the performance or results that may be obtained  by
                  using this software or data. The NLM and the U.S. Government disclaim all 
                  warranties, express or implied, including warranties of performance, 
                  merchantability or fitness for any particular purpose.
               </p>
            </div>
         </div>
         <div class="section"><a id="d2e50">
               <!-- named anchor --></a><h2 class="main-title">General overview</h2>
            <p id="d2e53">The various tasks performed by stylesheets in this distribution have been distinguished
               so
               they may be mixed and matched to meet specific local requirements, including:
            </p>
            <div class="list"><a id="d2e55">
                  <!-- named anchor --></a><ul>
                  <li>
                     <p id="d2e57">Generating HTML, PDF, or XHTML output.</p>
                  </li>
                  <li>
                     <p id="d2e60">Autoformatting structured citation elements <tt>(element-citation</tt>)
                        according to different sets of guidelines (we include stylesheets supporting the
                        NLM/Pubmed citation style and an APA-like citation style).
                     </p>
                  </li>
                  <li>
                     <p id="d2e66">Converting OASIS (CALS/Docbook) tables appearing in JATS documents into HTML (for
                        display or conversion to PDF).
                     </p>
                  </li>
                  <li>
                     <p id="d2e69">Filtering content based on the values of <tt>specific-use</tt> attributes
                        assigned to elements in the source data.
                     </p>
                  </li>
               </ul>
            </div>
            <p id="d2e74">These various operations are performed in stages as follows:</p>
            <div class="def-list"><a id="d2e76">
                  <!-- named anchor --></a><div class="def-list table">
                  <div class="def-item row" id="d2e77">
                     <div class="def-term cell" id="d2e78">
                        <p>Preprocesses</p>
                     </div>
                     <div class="def-def cell" id="d2e80">
                        <p class="first" id="d2e81">Preprocesses are all designed to perform operations needed by some processes but not
                           others, so they can be excluded when not needed. Generally speaking it is possible
                           to
                           run more than one preprocess, as long as they do not directly conflict with one
                           another. When they do, it can be expected that the first process in the chain to
                           handle a particular element or structure in the input will be the one to take
                           effect.
                        </p>
                        <p id="d2e83">Some but not all variants of NISO JATS will use OASIS tables instead of HTML tables;
                           in support of these, a stylesheet to convert OASIS tables into HTML (which is handled
                           by the main preview stylesheets) is also provided as a pre-process. This is documented
                           further below.
                        </p>
                        <p id="d2e85">All preprocessing stylesheets accept arbitrary (valid) JATS Publishing 1.0 XML and
                           emit the same format: they are "modified identity transformations", whose operations
                           are limited to a particular subset of elements related to their functional
                           requirements. (The OASIS tables stylesheet emits the subset of HTML tables used by
                           JATS and recognized by the main stylesheets. The citation preprocessors accept accept
                           arbitrary JATS input and produce JATS in "simple citation" form, on which see <a href="#simple-citation">below</a>.)
                        </p>
                        <p id="d2e90">Because some preprocesses perform operations that are not practically achieved in
                           modifiable, maintainable XSLT 1.0, they use XSLT 2.0 and require an XSLT 2.0
                           processor. Others will work in either an XSLT 1.0 or 2.0 processor.
                        </p>
                        <p id="d2e92">Brief descriptions of each preprocess appear below. Additionally, all stylesheets
                           in
                           this package are documented internally.
                        </p>
                     </div>
                  </div>
                  <div class="def-item row" id="d2e94">
                     <div class="def-term cell" id="d2e95">
                        <p>Main preview processes</p>
                     </div>
                     <div class="def-def cell" id="d2e97">
                        <p class="first" id="d2e98">There are two main preview stylesheets in this distribution.
                           <tt>jats-html.xsl</tt> formats JATS Publishing 1.0 in HTML for display
                           in web browsers.<a href="#d2e103"><span class="generated">[1]</span></a>
                           <tt>jats-xslfo.xsl</tt> converts JATS Publishing 1.0 XML into XSL
                           formatting objects, ready for rendering by an XSL formatting engine into PDF
                           output.
                        </p>
                        <p id="d2e110">Both main preview stylesheets accept a filtered form of JATS Publishing 1.0, in which
                           structured citation elements have been replaced with formatted citations. The
                           assumption here is that many processes will need to include some form of citation
                           processing in order to format citations in an appropriate style. For purposes of this
                           documentation, this filtered form can be called "Simple citation" JATS Publishing
                           1.0
                           (it is specified in more detail below). Some projects may have citations that are
                           already formatted using <tt>mixed-citation</tt> elements, which provides
                           for inline punctuation and hence formatting within the source data. Since all the
                           citation preprocessors respect punctuation that is already in place, any of them may
                           be used as the preprocessor in such cases.
                        </p>
                        <p id="d2e115">If input data should happen already to conform to the "Simple citation" format, a
                           citation preprocessor may be dispensed with altogether. Some projects may wish to
                           do
                           this — "unbundling" the citation formatting to manage it up front or by different
                           means altogether — in order to be able to use a wider range of XSLT processors,
                           including XSLT processors in web browsers such as Internet Explorer, Firefox or
                           Safari, to render their previews directly. The main preview stylesheets are
                           implemented in XSLT 1.0 in order to enable this.
                        </p>
                     </div>
                  </div>
                  <div class="def-item row" id="d2e117">
                     <div class="def-term cell" id="d2e118">
                        <p>Post-process</p>
                     </div>
                     <div class="def-def cell" id="d2e120">
                        <p class="first" id="d2e121">Some JATS Publishing 1.0 data may include MathML, so the rendering of MathML may be
                           an issue. The PDF preview stylesheet simply passes MathML through to be rendered by
                           the formatter; many commercial FO engines now support MathML. On the HTML side,
                           however, things are more complex since MathML is not supported by generic web browsers
                           displaying HTML.
                        </p>
                        <p id="d2e123">Some current browsers now support MathML display in XHTML output. For these purposes,
                           an HTML to XHTML converter has been provided as a post-process. More details are
                           provided below.
                        </p>
                     </div>
                  </div>
               </div>
            </div>
            <div class="section"><a id="d2e125">
                  <!-- named anchor --></a><h3 class="section-title">Stylesheets in this package</h3>
               <p id="d2e128">While the preview stylesheets in this distribution are intended as fairly comprehensive
                  solutions, the supporting stylesheets may serve simply as demonstrations of how to
                  achieve
                  common tasks. Projects should feel free to copy, modify or extend any of them in order
                  to
                  support local requirements better.
               </p>
               <div class="table-wrap panel"><a id="d2e130">
                     <!-- named anchor --></a><h5 class="label">Summary&nbsp;of&nbsp;stylesheets,&nbsp;dependencies,&nbsp;inputs&nbsp;and&nbsp;outputs</h5>
                  <table xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" frame="hsides" rules="rows" width="100%"><a id="d2e133">
                        <!-- named anchor --></a><tr style="font-size:110%; background-color:gainsboro"><a id="d2e134">
                           <!-- named anchor --></a><th align="left"><a id="d2e135">
                              <!-- named anchor --></a>Stylesheet
                        </th>
                        <th align="left"><a id="d2e137">
                              <!-- named anchor --></a>Purpose
                        </th>
                        <th align="left"><a id="d2e139">
                              <!-- named anchor --></a>Requires
                        </th>
                        <th align="left"><a id="d2e141">
                              <!-- named anchor --></a>Input format
                        </th>
                        <th align="left"><a id="d2e143">
                              <!-- named anchor --></a>Output format
                        </th>
                     </tr>
                     <tr><a id="d2e145">
                           <!-- named anchor --></a><th colspan="5" align="left"><a id="d2e146">
                              <!-- named anchor --></a>Preprocessors
                        </th>
                     </tr>
                     <tr><a id="d2e148">
                           <!-- named anchor --></a><td><a id="d2e149">
                              <!-- named anchor --></a><tt>xslt/citations-prep/jats-PMCcit.xsl</tt></td>
                        <td><a id="d2e152">
                              <!-- named anchor --></a>Formats unpunctuated citations according to NLM/Pubmed guidelines
                        </td>
                        <td><a id="d2e154">
                              <!-- named anchor --></a>XSLT 1.0
                        </td>
                        <td><a id="d2e156">
                              <!-- named anchor --></a>JATS Publishing 1.0
                        </td>
                        <td><a id="d2e158">
                              <!-- named anchor --></a>"Simple citation" JATS Publishing 1.0
                        </td>
                     </tr>
                     <tr><a id="d2e160">
                           <!-- named anchor --></a><td><a id="d2e161">
                              <!-- named anchor --></a><tt>xslt/citations-prep/jats-APAcit.xsl</tt></td>
                        <td><a id="d2e164">
                              <!-- named anchor --></a>Formats unpunctuated citations according to APA guidelines
                        </td>
                        <td><a id="d2e166">
                              <!-- named anchor --></a>XSLT 2.0
                        </td>
                        <td><a id="d2e168">
                              <!-- named anchor --></a>JATS Publishing 1.0
                        </td>
                        <td><a id="d2e170">
                              <!-- named anchor --></a>"Simple citation" JATS Publishing 1.0
                        </td>
                     </tr>
                     <tr><a id="d2e172">
                           <!-- named anchor --></a><td><a id="d2e173">
                              <!-- named anchor --></a><tt>xslt/prep/jats-webfilter.xsl</tt></td>
                        <td><a id="d2e176">
                              <!-- named anchor --></a>Excludes content with <tt>specific-use</tt> = "print-only"
                        </td>
                        <td><a id="d2e181">
                              <!-- named anchor --></a>XSLT 1.0
                        </td>
                        <td><a id="d2e183">
                              <!-- named anchor --></a>JATS Publishing 1.0
                        </td>
                        <td><a id="d2e185">
                              <!-- named anchor --></a>JATS Publishing 1.0
                        </td>
                     </tr>
                     <tr><a id="d2e187">
                           <!-- named anchor --></a><td><a id="d2e188">
                              <!-- named anchor --></a><tt>xslt/prep/jats-printfilter.xsl</tt></td>
                        <td><a id="d2e191">
                              <!-- named anchor --></a>Excludes content with <tt>specific-use</tt> = "web-only"
                        </td>
                        <td><a id="d2e196">
                              <!-- named anchor --></a>XSLT 1.0
                        </td>
                        <td><a id="d2e198">
                              <!-- named anchor --></a>JATS Publishing 1.0
                        </td>
                        <td><a id="d2e200">
                              <!-- named anchor --></a>JATS Publishing 1.0
                        </td>
                     </tr>
                     <tr><a id="d2e202">
                           <!-- named anchor --></a><td><a id="d2e203">
                              <!-- named anchor --></a><tt>xslt/oasis-tables/oasis-exchange-html.xsl</tt></td>
                        <td><a id="d2e206">
                              <!-- named anchor --></a>Converts OASIS Open tables into HTML
                        </td>
                        <td><a id="d2e208">
                              <!-- named anchor --></a>XSLT 2.0
                        </td>
                        <td><a id="d2e210">
                              <!-- named anchor --></a>OASIS tables
                        </td>
                        <td><a id="d2e212">
                              <!-- named anchor --></a>HTML tables
                        </td>
                     </tr>
                     <tr><a id="d2e214">
                           <!-- named anchor --></a><td><a id="d2e215">
                              <!-- named anchor --></a><tt>xslt/oasis-exchange-support.xsl</tt></td>
                        <td><a id="d2e218">
                              <!-- named anchor --></a>Provides functionality in support of
                           <tt>oasis-exchange-html.xsl</tt> and
                           <tt>oasis-table.sch</tt> (Schematron)
                        </td>
                        <td><a id="d2e226">
                              <!-- named anchor --></a>XSLT 1.0
                        </td>
                        <td><a id="d2e228">
                              <!-- named anchor --></a>JATS Publishing 1.0
                        </td>
                        <td><a id="d2e230">
                              <!-- named anchor --></a>JATS Publishing 1.0
                        </td>
                     </tr>
                     <tr><a id="d2e232">
                           <!-- named anchor --></a><th colspan="5" align="left"><a id="d2e233">
                              <!-- named anchor --></a>Main JATS Publishing 1.0 Preview stylesheets
                        </th>
                     </tr>
                     <tr><a id="d2e235">
                           <!-- named anchor --></a><td><a id="d2e236">
                              <!-- named anchor --></a><tt>xslt/main/jats-html.xsl</tt></td>
                        <td><a id="d2e239">
                              <!-- named anchor --></a>Formats Journal Publishing data in HTML
                        </td>
                        <td><a id="d2e241">
                              <!-- named anchor --></a>XSLT 1.0
                        </td>
                        <td><a id="d2e243">
                              <!-- named anchor --></a>"Simple citation" JATS Publishing 1.0
                        </td>
                        <td><a id="d2e245">
                              <!-- named anchor --></a>HTML (or XML-wf HTML)
                        </td>
                     </tr>
                     <tr><a id="d2e247">
                           <!-- named anchor --></a><td><a id="d2e248">
                              <!-- named anchor --></a><tt>xslt/main/jats-xslfo.xsl</tt></td>
                        <td><a id="d2e251">
                              <!-- named anchor --></a>Formats Journal Publishing data as PDF
                        </td>
                        <td><a id="d2e253">
                              <!-- named anchor --></a>XSLT 1.0, XSL-FO formatter<a href="#XSL-FOnote"><span class="generated">[i]</span></a></td>
                        <td><a id="d2e256">
                              <!-- named anchor --></a>"Simple citation" JATS Publishing 1.0
                        </td>
                        <td><a id="d2e258">
                              <!-- named anchor --></a>PDF
                        </td>
                     </tr>
                     <tr><a id="d2e261">
                           <!-- named anchor --></a><th colspan="5" align="left"><a id="d2e262">
                              <!-- named anchor --></a>Postprocessor
                        </th>
                     </tr>
                     <tr><a id="d2e264">
                           <!-- named anchor --></a><td><a id="d2e265">
                              <!-- named anchor --></a><tt>xslt/post/xhtml-ns.xsl</tt></td>
                        <td><a id="d2e268">
                              <!-- named anchor --></a>Converts HTML to XHTML (for support of W3C MathML)
                        </td>
                        <td><a id="d2e270">
                              <!-- named anchor --></a>XSLT 1.0
                        </td>
                        <td><a id="d2e272">
                              <!-- named anchor --></a>HTML
                        </td>
                        <td><a id="d2e274">
                              <!-- named anchor --></a>XHTML
                        </td>
                     </tr>
                     <tr><a id="d2e276">
                           <!-- named anchor --></a><th colspan="5" align="left"><a id="d2e277">
                              <!-- named anchor --></a>Saxon shell ("wrapper") stylesheets
                        </th>
                     </tr>
                     <tr><a id="d2e279">
                           <!-- named anchor --></a><td><a id="d2e280">
                              <!-- named anchor --></a><tt>shells/saxon/jats-APAcit-html.xsl</tt></td>
                        <td><a id="d2e283">
                              <!-- named anchor --></a>Formats Journal Publishing data in HTML with APA-like citations
                        </td>
                        <td><a id="d2e285">
                              <!-- named anchor --></a>XSLT 2.0/Saxon
                        </td>
                        <td><a id="d2e287">
                              <!-- named anchor --></a>JATS Publishing 1.0
                        </td>
                        <td><a id="d2e289">
                              <!-- named anchor --></a>HTML
                        </td>
                     </tr>
                     <tr><a id="d2e291">
                           <!-- named anchor --></a><td><a id="d2e292">
                              <!-- named anchor --></a><tt>shells/saxon/jats-PMCcit-html.xsl</tt></td>
                        <td><a id="d2e295">
                              <!-- named anchor --></a>Formats Journal Publishing data in HTML with NLM/Pubmed citations
                        </td>
                        <td><a id="d2e297">
                              <!-- named anchor --></a>XSLT 2.0/Saxon
                        </td>
                        <td><a id="d2e299">
                              <!-- named anchor --></a>JATS Publishing 1.0
                        </td>
                        <td><a id="d2e301">
                              <!-- named anchor --></a>HTML
                        </td>
                     </tr>
                     <tr><a id="d2e303">
                           <!-- named anchor --></a><td><a id="d2e304">
                              <!-- named anchor --></a><tt>shells/saxon/jats-PMCcit-web-html.xsl</tt></td>
                        <td><a id="d2e307">
                              <!-- named anchor --></a>Formats Journal Publishing data in HTML with NLM/Pubmed citations, excluding
                           "print-only" content
                        </td>
                        <td><a id="d2e309">
                              <!-- named anchor --></a>XSLT 2.0/Saxon
                        </td>
                        <td><a id="d2e311">
                              <!-- named anchor --></a>JATS Publishing 1.0
                        </td>
                        <td><a id="d2e313">
                              <!-- named anchor --></a>HTML
                        </td>
                     </tr>
                     <tr><a id="d2e315">
                           <!-- named anchor --></a><td><a id="d2e316">
                              <!-- named anchor --></a><tt>shells/saxon/jats-PMCcit-xhtml.xsl</tt></td>
                        <td><a id="d2e319">
                              <!-- named anchor --></a>Formats Journal Publishing data with NLM/Pubmed citations in XHTML (allows for
                           MathML)
                        </td>
                        <td><a id="d2e321">
                              <!-- named anchor --></a>XSLT 2.0/Saxon
                        </td>
                        <td><a id="d2e323">
                              <!-- named anchor --></a>JATS Publishing 1.0
                        </td>
                        <td><a id="d2e325">
                              <!-- named anchor --></a>XHTML
                        </td>
                     </tr>
                     <tr><a id="d2e327">
                           <!-- named anchor --></a><td><a id="d2e328">
                              <!-- named anchor --></a><tt>shells/saxon/jats-APAcit-xslfo.xsl</tt></td>
                        <td><a id="d2e331">
                              <!-- named anchor --></a>Formats Journal Publishing data as PDF with APA-like citations
                        </td>
                        <td><a id="d2e333">
                              <!-- named anchor --></a>XSLT 2.0/Saxon, XSL-FO formatter <a href="#XSL-FOnote"><span class="generated">[i]</span></a></td>
                        <td><a id="d2e336">
                              <!-- named anchor --></a>JATS Publishing 1.0
                        </td>
                        <td><a id="d2e338">
                              <!-- named anchor --></a>PDF
                        </td>
                     </tr>
                     <tr><a id="d2e340">
                           <!-- named anchor --></a><td><a id="d2e341">
                              <!-- named anchor --></a><tt>shells/saxon/jats-PMCcit-xslfo.xsl</tt></td>
                        <td><a id="d2e344">
                              <!-- named anchor --></a>Formats Journal Publishing data as PDF with NLM/Pubmed citations
                        </td>
                        <td><a id="d2e346">
                              <!-- named anchor --></a>XSLT 2.0/Saxon, XSL-FO formatter <a href="#XSL-FOnote"><span class="generated">[i]</span></a></td>
                        <td><a id="d2e349">
                              <!-- named anchor --></a>JATS Publishing 1.0
                        </td>
                        <td><a id="d2e351">
                              <!-- named anchor --></a>PDF
                        </td>
                     </tr>
                     <tr><a id="d2e353">
                           <!-- named anchor --></a><td><a id="d2e354">
                              <!-- named anchor --></a><tt>shells/saxon/jats-PMCcit-print-fo.xsl</tt></td>
                        <td><a id="d2e357">
                              <!-- named anchor --></a>Formats Journal Publishing data as PDF with NLM/Pubmed citations, excluding
                           "web-only" content
                        </td>
                        <td><a id="d2e359">
                              <!-- named anchor --></a>XSLT 2.0/Saxon, XSL-FO formatter <a href="#XSL-FOnote"><span class="generated">[i]</span></a></td>
                        <td><a id="d2e362">
                              <!-- named anchor --></a>JATS Publishing 1.0
                        </td>
                        <td><a id="d2e364">
                              <!-- named anchor --></a>PDF
                        </td>
                     </tr>
                     <tr><a id="d2e366">
                           <!-- named anchor --></a><td><a id="d2e367">
                              <!-- named anchor --></a><tt>shells/saxon/jats-PMCcit-oasis-print-fo.xsl</tt></td>
                        <td><a id="d2e370">
                              <!-- named anchor --></a>Formats Journal Publishing data as PDF with NLM/Pubmed citations and OASIS tables,
                           excluding "web-only" content
                        </td>
                        <td><a id="d2e372">
                              <!-- named anchor --></a>XSLT 2.0/Saxon, XSL-FO formatter <a href="#XSL-FOnote"><span class="generated">[i]</span></a></td>
                        <td><a id="d2e375">
                              <!-- named anchor --></a>JATS Publishing 1.0
                        </td>
                        <td><a id="d2e377">
                              <!-- named anchor --></a>PDF
                        </td>
                     </tr>
                     <tr><a id="d2e380">
                           <!-- named anchor --></a><th colspan="5" align="left"><a id="d2e381">
                              <!-- named anchor --></a>XProc pipelines
                        </th>
                     </tr>
                     <tr><a id="d2e383">
                           <!-- named anchor --></a><td colspan="5" align="left"><a id="d2e384">
                              <!-- named anchor --></a>These provide the same conversions under the same names
                           as the Saxon shells, except with a different suffix (<tt>xpl</tt> not
                           <tt>xsl</tt>) since they are XProc pipeline specifications not
                           (extended) XSLT 2.0 stylesheets. They are all located in the
                           <tt>shells/xproc</tt> subdirectory.
                        </td>
                     </tr>
                  </table>
                  <div class="table-wrap-foot">
                     <div class="fn-group">
                        <div class="footnote"><a id="XSL-FOnote">
                              <!-- named anchor --></a><p id="d2e398"><span class="generated">[i]</span> Tested with AntennaHouse 4.3 with MathML support.
                           </p>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
         <div class="section"><a id="d2e400">
               <!-- named anchor --></a><h2 class="main-title">Running the stylesheets</h2>
            <p id="d2e403">Stylesheets included in this distribution make it possible to run processing pipelines
               easily. For various reasons, users and publishers may wish to modify these methods.
            </p>
            <div class="section"><a id="d2e405">
                  <!-- named anchor --></a><h3 class="section-title">Using the provided shell stylesheets and pipelines</h3>
               <p id="d2e408">The easiest way to apply either of the preview stylesheets is to use one of the shell
                  ("wrapper") stylesheets or XProc pipelines. The shell stylesheets can be run with
                  Saxon,
                  the XSLT 2.0 engine, and rely on Saxon-specific extensions to XSLT 2.0; the XProc
                  pipelines can be run with any conforming XProc engine that supports XSLT 2.0 stages
                  (no
                  extensions are needed). Either process applies a set of transformations in sequence
                  quickly, with a minimum of memory or disk overhead. Each one calls one or the other
                  main
                  preview stylesheet, with different pre- or postprocessors depending on its intended
                  application.
               </p>
               <p id="d2e410">The Saxon shell stylesheets provided also depend on the module
                  <tt>main/shell-utility.xsl</tt> to function. This module must be in place,
                  and its location in relation to the stylesheets named in the shell must be stable,
                  for
                  things to work.
               </p>
               <p id="d2e415">Because running the XSL-FO Preview stylesheet also entails running an XSL-FO formatter,
                  there are slightly different considerations in setting things up for each type of
                  output:
               </p>
               <div class="section"><a id="d2e417">
                     <!-- named anchor --></a><h4 class="subsection-title">HTML preview pipeline</h4>
                  <p id="d2e420">Either from the command line or using an XML editor or XML/XSLT IDE, invoke an XProc
                     processor with an XProc pipeline, or Saxon with a shell stylesheet, to apply it to
                     a
                     Journal Publishing 3.0 file or to a subdirectory of such files. If a DTD is referenced
                     by the file, make sure it is available. Place the results in the location of your
                     choice. Copy the <tt>jats-preview.css</tt> file next to the HTML results.
                     You are done.
                  </p>
               </div>
               <div class="section"><a id="d2e425">
                     <!-- named anchor --></a><h4 class="subsection-title">XSL-FO preview pipeline</h4>
                  <p id="d2e428">Two alternatives are available:</p>
                  <div class="list"><a id="d2e430">
                        <!-- named anchor --></a><ul>
                        <li>
                           <p id="d2e432">Configure your XSL-FO engine to run a transformation using an XProc engine or
                              Saxon, and invoke the transformation from the formatter.
                           </p>
                        </li>
                        <li>
                           <p id="d2e435">Run the transformation in the same way as when producing HTML, to generate an XML
                              XSL-FO file that can be processed by the XSL-FO formatting engine.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <p id="d2e437">The tradeoff is that while the first method requires a (one-time) configuration, it
                     is
                     easier for the user. It is a common feature of XSL-FO engines to allow configuring
                     them
                     to use the XSLT transformation engine of your choice.<a href="#d2e439"><span class="generated">[3]</span></a></p>
               </div>
            </div>
            <div class="section"><a id="d2e445">
                  <!-- named anchor --></a><h3 class="section-title">Extending the Saxon shell stylesheet or writing your own</h3>
               <p id="d2e448">The shell stylesheets included in this package all have the same logic. Stylesheets
                  to be
                  called in and applied to the source data, in sequence, are named in a variable in
                  the
                  stylesheet. Inserting or removing components is as easy as changing this variable.
               </p>
               <p id="d2e450">For example, the stylesheet <tt>jats-PMCcit-xhtml.xsl</tt> has the variable
                  <tt>$processes</tt> declared as
                  follows:<pre class="preformat">&lt;xsl:variable name="processes"&gt;
  &lt;step&gt;../../xslt/citations-prep/jats-PMCcit.xsl&lt;/step&gt;
  &lt;step&gt;../../xslt/preview/jats-html-preview.xsl&lt;/step&gt;
  &lt;step&gt;../../xslt/post/xhtml-ns.xsl&lt;/step&gt;
&lt;/xsl:variable&gt;</pre>Add
                  a step to this
                  declaration:<pre class="preformat">&lt;xsl:variable name="processes"&gt;
  <b>&lt;step&gt;../../xslt/prep/jats-webfilter.xsl&lt;/step&gt;</b>
  &lt;step&gt;../../xslt/citations-prep/jats-PMCcit.xsl&lt;/step&gt;
  &lt;step&gt;../../xslt/main/jats-html-preview.xsl&lt;/step&gt;
  &lt;step&gt;../../xslt/post/xhtml-ns.xsl&lt;/step&gt;
&lt;/xsl:variable&gt;</pre>Now,
                  an additional preprocess <tt>prep/jats-webfilter.xsl</tt> is run before the
                  citation preprocessing step.
               </p>
               <p id="d2e470">Of course, we recommend copying a shell with a new name and making changes there,
                  in
                  order to preserve the integrity of files in the distribution.
               </p>
               <p id="d2e472">All paths given are relative to the shell stylesheet's location in the subdirectory
                  structure.
               </p>
               <p id="d2e474">Note that configuration of the output serialization using the
                  <tt>xsl:output</tt> instruction is designated by the shell stylesheet.
                  Accordingly, a shell stylesheet intended to generate plain HTML might have
                  <tt>method="html"</tt> indicated in its <tt>xsl:output</tt>,
                  while a shell stylesheet generating XHTML should have
                  <tt>method="xhtml"</tt>.
               </p>
            </div>
            <div class="section"><a id="d2e488">
                  <!-- named anchor --></a><h3 class="section-title">Extending an XProc pipeline or writing your own</h3>
               <p id="d2e491">Of course, the same possibilities are available when using XProc, with many more.
                  For
                  example an XProc pipeline could included DTD or Schematron validation along with
                  processing of documents (or only of valid documents, if preferred), processing sets
                  of
                  documents together, etc.
               </p>
               <p id="d2e493">XProc is a W3C-standard XML process pipelining technology, documented on line.</p>
            </div>
            <div class="section"><a id="d2e495">
                  <!-- named anchor --></a><h3 class="section-title">Designing and running your own pipeline</h3>
               <p id="d2e498">If you don't want to use XProc or rely on the XSLT extensions supported by Saxon,
                  you can
                  build your own pipelines to apply the stylesheets, using the framework of your choice.
                  Shell scripts, batch files, scripting languages, and build tools such as Unix
                  <tt>make</tt> or Apache Ant can all be used for this purpose. The
                  principle is simple: each step in the pipeline generates results that are taken as
                  the
                  input for the next step in the pipeline. Serialization may follow each step (if each
                  pipeline reads its input from the file system) or may be performed only after the
                  last
                  step (if steps are connected using event streams or if intermediate results are held
                  in
                  memory).
               </p>
               <p id="d2e503">Keep in mind that an XSLT engine will still be required to run the separate steps,
                  and
                  that several of the stylesheets provided do require an XSLT 2.0 processor.
               </p>
            </div>
            <div class="section"><a id="d2e505">
                  <!-- named anchor --></a><h3 class="section-title">Running without a pipeline</h3>
               <p id="d2e508">The stylesheets can also be run individually, without any pipeline automation at all,
                  just by applying preprocessor stylesheets to the input, if needed, and then applying
                  the
                  appropriate main preview stylesheet to the output from the preprocessors.
               </p>
               <p id="d2e510">For input that contains no bibliographic citations, or in which all the bibliographic
                  citations are pre-formatted and conform to the "simple citation" format defined <a href="#simple-citation">below</a>, no preprocessors are necessary and the main preview
                  stylesheet can be run standalone in any XSLT 1.0 or 2.0 processor (including client-side
                  web browsers or other XSLT-capable display engines). 
               </p>
               <p id="d2e515">Note, however, that most JATS input that contains any citations at all will benefit
                  from
                  being passed through one of the citation preprocessors, even if all the citations
                  in the
                  input are <tt>mixed-citation</tt> and have the appropriate punctuation: the
                  main preview stylesheets work best if the only elements within citations in the input
                  are
                  presentation-oriented elements; the preprocessors strip out all other elements inside
                  of
                  citations, and replace them with appropriate presentation-oriented markup. 
               </p>
            </div>
         </div>
         <div class="section"><a id="d2e520">
               <!-- named anchor --></a><h2 class="main-title">Tweaks and extensions to the main preview stylesheets</h2>
            <p id="d2e523">These stylesheets provide for basic formatting of Journal Publishing data for preview;
               they
               are not designed to serve as production stylesheets. Their functionality can be extended
               or
               modified, however.<a href="#d2e525"><span class="generated">[4]</span></a> It is recommended that modifications make use of the XSLT import mechanism: write
               your
               modified templates in a separate stylesheet module that imports the main stylesheet
               module.
               The modifications can then be maintained separately in one place.
            </p>
            <div class="section"><a id="d2e532">
                  <!-- named anchor --></a><h3 class="section-title">CSS stylesheet</h3>
               <p id="d2e535">HTML results are generated with a link to <tt>jats-preview.css</tt>, given
                  as a relative path that expects the named file to be in the same subdirectory as the
                  HTML
                  result file (or the XML source file if it is processed directly in a browser).
               </p>
               <p id="d2e540">This can be altered at runtime by overriding the value of the <tt>css</tt>
                  parameter supplied to the main HTML Preview stylesheet. This allows a CSS stylesheet
                  with
                  another name to be used or a stylesheet to be located elsewhere. If an empty string
                  is
                  provided, the HTML results will have no link to an external CSS.
               </p>
               <p id="d2e545">Of course, altering <tt>jats-preview.css</tt> or providing your own CSS
                  stylesheet is an easy way to alter the look and feel of output without editing any
                  XSLT.
                  Many of the basic settings in the HTML presentation, including fonts, rules, colors
                  (including the colors of warnings and generated text) may be customized in this way.
               </p>
            </div>
            <div class="section"><a id="d2e550">
                  <!-- named anchor --></a><h3 class="section-title">Enabling autonumbering in the XSLT</h3>
               <p id="d2e553">As described in the <i>Users' Guide</i>, the Preview stylesheet does not
                  generate labels with automatic numbering for elements in presentation, except the
                  <tt>fn</tt> and <tt>ref</tt> elements as described there.
                  However, the stylesheets are provided with variables that can be used as switches
                  to turn
                  on autonumbering, along with templates that can be modified (or overridden, in a
                  customization layer) in order to control the formats of the numbers. See the stylesheets,
                  especially the templates in mode <tt>label-text</tt>.
               </p>
            </div>
         </div>
         <div class="section"><a id="d2e567">
               <!-- named anchor --></a><h2 class="main-title">Support of OASIS tables</h2>
            <p id="d2e570">A conversion stylesheet is included in this distribution for converting OASIS Exchange
               XML
               tables, as specified in <a target="xrefwindow" href="https://www.oasis-open.org/specs/tm9901.html" id="d2e572">OASIS Technical Memorandum TR 9901:1999</a>, into the subset of HTML tables used
               by JATS. This is in order that JATS variants using OASIS tables may also use these
               preview
               stylesheets; but the OASIS conversion logic will work on any data containing OASIS
               tables
               (in the namespace
               <tt>http://docs.oasis-open.org/ns/oasis-exchange/table</tt>), making them into
               HTML equivalents (not namespace-qualified). As with other components of this distribution,
               developers are free to extend and modify this stylesheet and to integrate it into
               their
               systems.
            </p>
            <p id="d2e578">This module is designed so it can be imported into another (XSLT 2.0) stylesheet,
               although
               in this distribution it is presented as a separate pipeline step. (This is in order
               that the
               main preview stylesheets may still use XSLT 1.0, for the broadest possible support.)
               Developers familiar with the architecture of XSLT may wish to integrate it more tightly
               by
               calling it into another stylesheet (using <tt>xsl:import</tt>) instead of
               using it as a separate step.
            </p>
            <p id="d2e583">In addition, this distribution also includes a Schematron schema for use with OASIS
               tables,
               which must be checked against constraints over and above validity to a DTD or schema.
               This
               Schematron will ensure that tables are "square" (rows and columns are all filled,
               allowing
               for implied table cells, row and column spanning etc.), that attributes are given
               consistently, and so forth. Since some analytic operations are provided using XSLT
               stylesheet functions, this Schematron requires a processor that permits foreign elements
               (in
               this case, XSLT elements) to be present.
            </p>
         </div>
         <div class="section"><a id="simple-citation">
               <!-- named anchor --></a><h2 class="main-title">Specification of "simple citation" NISO JATS 1.0</h2>
            <p id="d2e588">Projects that wish to dispense with automated formatting of citations, to extend the
               automated processing provided, or to develop their own citation formatting logic,
               will need
               to know the subset of Journal Publishing 3.0 that can be reliably converted by the
               preview
               stylesheets. This profile introduces additional constraints on elements related to
               bibliographic citations: <tt>element-citation</tt>,
               <tt>nlm-citation</tt>, <tt>mixed-citation</tt> and their
               children (as well as the analogous <tt>citation</tt> element in NLM v2.3),
               along with the related elements <tt>product</tt>,
               <tt>related-article</tt> and <tt>related-object</tt>.
            </p>
            <div class="list"><a id="d2e612">
                  <!-- named anchor --></a><ul>
                  <li>
                     <p id="d2e614"><tt>element-citation</tt> and <tt>nlm-citation</tt> are not
                        recognized or processed specially. A preprocessor should convert them into
                        <tt>mixed-citation</tt>, providing their contents with punctuation in
                        the process. (This is what the packaged citation preprocessors do.) If these elements
                        appear, preview stylesheets will present them without formatting.
                     </p>
                  </li>
                  <li>
                     <p id="d2e625">Along with literal text (including punctuation), the following elements are recognized
                        inside <tt>mixed-citation</tt>, <tt>product</tt>,
                        <tt>related-article</tt> and <tt>related-object</tt>:
                        <div class="blockquote"><a id="d2e639">
                              <!-- named anchor --></a><p class="first" id="d2e640"><tt>bold</tt>, <tt>italic</tt>,
                              <tt>monospace</tt>, <tt>overline</tt>,
                              <tt>roman</tt>, <tt>sans-serif</tt>,
                              <tt>sc</tt>, <tt>strike</tt>,
                              <tt>underline</tt>, <tt>inline-graphic</tt>,
                              <tt>label</tt>, <tt>email</tt>,
                              <tt>ext-link</tt>, <tt>uri</tt>,
                              <tt>sub</tt>, <tt>sup</tt>,
                              <tt>styled-content</tt></p>
                        </div>
                     </p>
                  </li>
                  <li>
                     <p id="d2e694">The following elements are permitted in citation elements in Journal Publishing 3.0,
                        but are <i>excluded</i> from the simple citation profile. A preprocessor
                        should strip them from content or convert them into presentation-oriented elements
                        (listed above), with appropriate punctuation, according to the rules of the chosen
                        citation format. If they appear, these element can be expected to be processed by
                        a
                        preview stylesheet according to default rules, which generally means their content
                        will
                        appear with no formatting consequences:
                        <div class="blockquote"><a id="d2e699">
                              <!-- named anchor --></a><p class="first" id="d2e700"><tt>abbrev</tt>, <tt>alternatives</tt>,
                              <tt>annotation</tt>, <tt>article-title</tt>,
                              <tt>chapter-title</tt>, <tt>chem-struct</tt>,
                              <tt>collab</tt>, <tt>comment</tt>,
                              <tt>conf-date</tt>, <tt>conf-loc</tt>,
                              <tt>conf-name</tt>, <tt>conf-sponsor</tt>,
                              <tt>date</tt>, <tt>date-in-citation</tt>,
                              <tt>day</tt>, <tt>edition</tt>,
                              <tt>elocation-id</tt>, <tt>etal</tt>,
                              <tt>fpage</tt>, <tt>gov</tt>,
                              <tt>inline-formula</tt>, <tt>institution</tt>,
                              <tt>isbn</tt>, <tt>issn</tt>,
                              <tt>issue</tt>, <tt>issue-id</tt>,
                              <tt>issue-part</tt>, <tt>issue-title</tt>,
                              <tt>lpage</tt>, <tt>milestone-end</tt>,
                              <tt>milestone-start</tt>, <tt>month</tt>,
                              <tt>name</tt>, <tt>named-content</tt>,
                              <tt>object-id</tt>, <tt>page-range</tt>,
                              <tt>part-title</tt>, <tt>patent</tt>,
                              <tt>person-group</tt>, <tt>private-char</tt>,
                              <tt>pub-id</tt>, <tt>publisher-loc</tt>,
                              <tt>publisher-name</tt>, <tt>role</tt>,
                              <tt>season</tt>, <tt>series</tt>,
                              <tt>size</tt>, <tt>source</tt>,
                              <tt>std</tt>, <tt>string-name</tt>,
                              <tt>supplement</tt>, <tt>trans-source</tt>,
                              <tt>trans-title</tt>, <tt>volume</tt>,
                              <tt>volume-id</tt>, <tt>volume-series</tt>,
                              <tt>year</tt></p>
                        </div>
                     </p>
                  </li>
               </ul>
            </div>
         </div>
      </div>
      <div id="article1-back" class="back">
         <div class="back-section"><a id="d2e3">
               <!-- named anchor --></a><h2 class="main-title">Notes</h2>
            <div class="footnote"><a id="d2e103">
                  <!-- named anchor --></a><p id="d2e104"><span class="generated">[1]</span> Unfortunately, due to tradeoffs forced by discrepancies in their modeling of
                  block vs inline elements in the Journal Publishing tag set and HTML, not all
                  results of the HTML preview stylesheet can be guaranteed to be valid HTML. But
                  none of the known issues have hindered correct rendering in browsers.
               </p>
            </div>
            <div class="footnote"><a id="d2e439">
                  <!-- named anchor --></a><p id="d2e440"><span class="generated">[3]</span> The Journal Publishing 3.0 XSL-FO preview stylesheet was tested with the
                  AntennaHouse XSL formatter, version 4.3. Instructions for configuring AntennaHouse
                  to use an alternative XSLT processor can be found in their user documentation; the
                  settings to change are under the <b>Format / Format Option Setting</b> menu
                  option. A tip: test your invocation your processor from the command line first, so
                  you can paste accurate settings into the dialog box.
               </p>
            </div>
            <div class="footnote"><a id="d2e525">
                  <!-- named anchor --></a><p id="d2e526"><span class="generated">[4]</span> The overall architecture of this stylesheet suite, with coverage of approaches to
                  customizing it, was described in a paper at JATS-Con 2010. A written version is online
                  at <a target="xrefwindow" href="http://www.ncbi.nlm.nih.gov/books/NBK47104/" id="d2e528">http://www.ncbi.nlm.nih.gov/books/NBK47104/</a>.
               </p>
            </div>
         </div>
      </div>
      <div id="article1-footer" class="footer">
         <hr class="part-rule">
         <div class="branding">
            <p>This display is generated from NISO JATS XML with <b>jats-html.xsl</b>. The XSLT engine is SAXON 9.3.0.4 from Saxonica.
            </p>
         </div>
      </div>
   </body>
</html>